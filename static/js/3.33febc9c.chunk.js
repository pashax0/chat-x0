(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{58:function(e,t,o){},59:function(e,t,o){"use strict";o.r(t);var n=o(3),a=o(4),s=o(8),r=o(6),l=o(7),i=o(0),c=o.n(i),p=(o(58),function(e){function t(e){var o;Object(n.a)(this,t),(o=Object(s.a)(this,Object(r.a)(t).call(this,e))).handlePopoverOpen=function(e){o.setState({anchorEl:e})},o.handlePopoverClose=function(){o.setState({anchorEl:null})},o.handleAddToMessage=function(e){o.props.addToMsg(e)};var a=localStorage.getItem("top")?+localStorage.getItem("top"):0;return o.state={showLoader:!1,isActiveWindow:!0,anchorEl:null,posFromTop:a},o.listRef=c.a.createRef(),o}return Object(l.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.posFromTop&&this.scrolling(this.state.posFromTop),window.onbeforeunload=function(){return localStorage.setItem("top",e.state.posFromTop)},window.onunload=function(){return localStorage.setItem("top",e.state.posFromTop)}}},{key:"componentWillUnmount",value:function(){localStorage.setItem("top",this.state.posFromTop)}},{key:"componentDidUpdate",value:function(e){this.props.wsStatus!==e.wsStatus&&this.state.posFromTop&&this.scrolling(this.state.posFromTop);var t=this.props.msgs;if("granted"===Notification.permission&&e.msgs.length!==t.length&&!this.state.isActiveWindow){var o=t[t.length-1].message;new Notification("Chat-x0",{body:o})}}},{key:"scrolling",value:function(e){this.refs.list.scrollTo(0,e)}},{key:"handleScrolling",value:function(e){this.setState({posFromTop:+e.scrollTop})}},{key:"render",value:function(){var e=this,t=this.props,o=t.msgs,n=t.from,a=/(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/gi;return c.a.createElement("ul",{className:"messages",ref:"list",onScroll:function(t){return e.handleScrolling(t.target)}},o.map(function(t){return c.a.createElement("li",{className:"msg-container ".concat(n===t.from?"own":""),key:t.id},c.a.createElement("div",{className:"msg-info"},c.a.createElement("div",{className:"msg-author",onMouseEnter:function(){return e.handlePopoverOpen(t.id)},onMouseLeave:e.handlePopoverClose},t.from,e.state.anchorEl===t.id?c.a.createElement("div",{className:"popover",onClick:function(){return e.handleAddToMessage(t.from)}},"Send message to ",t.from):null),c.a.createElement("div",{className:"msg-date"},new Date(t.time).toLocaleString())),c.a.createElement("p",{className:"msg-text",dangerouslySetInnerHTML:{__html:"".concat(t.message.replace(a,'<a class="ext-link" href="$&" target="_blank">link</a>'))}}))}))}}]),t}(i.Component));t.default=p}}]);
//# sourceMappingURL=3.33febc9c.chunk.js.map